{
  "AWSEBDockerrunVersion": 2,
  "containerDefinitions": [
    {
      "name": "todo-rabbitmq",
      "image": "rabbitmq:3.7.13-management",
      "hostname": "todo-rabbitmq",
      "memory": 200,
      "essential": false
    },
    {
      "name": "todo-cache-ingestion",
      "image": "dbaker7532/todo-cache-ingestion:{{ .Values.todoVersion }}",
      "hostname": "todo-cache-ingestion",
      "memory": 128,
      "essential": false,
      "links": ["todo-rabbitmq", "todo-storage-service"],
      "command": ["sh", "/home/node/app/start.sh"]
    },
    {
      "name": "todo-cache-service",
      "image": "dbaker7532/todo-cache-service:{{ .Values.todoVersion }}",
      "hostname": "todo-cache-service",
      "memory": 128,
      "essential": false
    },
    {
      "name": "todo-search-ingestion",
      "image": "dbaker7532/todo-search-ingestion:{{ .Values.todoVersion }}",
      "hostname": "todo-search-ingestion",
      "memory": 128,
      "essential": false,
      "links": ["todo-rabbitmq"],
      "command": ["sh", "/home/node/app/start.sh"]
    },
    {
      "name": "todo-search-service",
      "image": "dbaker7532/todo-search-service:{{ .Values.todoVersion }}",
      "hostname": "todo-search-service",
      "memory": 128,
      "essential": false
    },
    {
      "name": "todo-storage-ingestion",
      "image": "dbaker7532/todo-storage-ingestion:{{ .Values.todoVersion }}",
      "hostname": "todo-storage-ingestion",
      "memory": 128,
      "essential": false,
      "links": ["todo-rabbitmq"],
      "command": ["sh", "/home/node/app/start.sh"]
    },
    {
      "name": "todo-storage-service",
      "image": "dbaker7532/todo-storage-service:{{ .Values.todoVersion }}",
      "hostname": "todo-storage-service",
      "memory": 128,
      "essential": false
    },
    {
      "name": "todo-api-gateway",
      "image": "dbaker7532/todo-api-gateway:{{ .Values.todoVersion }}",
      "hostname": "todo-api-gateway",
      "memory": 128,
      "essential": false,
      "command": ["sh", "/home/node/app/start.sh"],
      "links": [
        "todo-rabbitmq",
        "todo-cache-service",
        "todo-cache-ingestion",
        "todo-search-service",
        "todo-search-ingestion",
        "todo-storage-service",
        "todo-storage-ingestion"
      ]
    },
    {
      "name": "todo-view",
      "image": "dbaker7532/todo-view:{{ .Values.todoVersion }}",
      "hostname": "todo-view",
      "memory": 768,
      "essential": false
    },
    {
      "name": "todo-proxy",
      "image": "dbaker7532/todo-proxy:{{ .Values.todoVersion }}",
      "memory": 128,
      "essential": true,
      "portMappings": [
        {
          "containerPort": 80,
          "hostPort": 80
        }
      ],
      "links": ["todo-view", "todo-api-gateway"]
    }
  ]
}
